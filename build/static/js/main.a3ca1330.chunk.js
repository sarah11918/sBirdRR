(this["webpackJsonpesbuild-reactjs"]=this["webpackJsonpesbuild-reactjs"]||[]).push([[0],{29:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(17),c=n(9),o=n(1),i=n(3),s=n.n(i),u=n(8),m=n(4),d=function(e){return r.a.createElement("div",{className:"container"},e.children)},p=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Choose your eBird Region"),r.a.createElement("form",{onSubmit:e.getSightings},r.a.createElement("select",{name:"location"},r.a.createElement("option",{value:"CA-PE-PR",selected:!0},"Prince County, PEI"),r.a.createElement("option",{value:"CA-PE-QU"},"Queens County, PEI"),r.a.createElement("option",{value:"CA-PE-KI"},"Kings County, PEI"),r.a.createElement("option",{value:"CA-ON-DR"},"Durham Region, ON"),r.a.createElement("option",{value:"CA-ON-HT"},"Halton Region, ON"),r.a.createElement("option",{value:"CA-ON-OT"},"Ottawa, ON"),r.a.createElement("option",{value:"CA-ON-PL"},"Peel Region, ON"),r.a.createElement("option",{value:"CA-ON-SC"},"Simcoe County, ON"),r.a.createElement("option",{value:"CA-ON-TO"},"Toronto, ON")),r.a.createElement("button",{className:"select-button"},"Find my bird!")),r.a.createElement("h3",null,"(or enter your region ID below)"),r.a.createElement("form",{onSubmit:e.getSightings,className:"search-form"},r.a.createElement("input",{name:"location",className:"user-input",type:"text",placeholder:"Location: e.g CA-PE-PR"}),r.a.createElement("button",{className:"search-button"},"Find my bird!")))};function E(e){var t=e.birdData,n=(t.locId,t.locName),a=t.comName,l=t.obsDt;return r.a.createElement("div",{className:"bird-data"},r.a.createElement("h3",null,"Bird reported most recently in the area:"),r.a.createElement("p",{className:"bird-result"},a),r.a.createElement("p",null,n),r.a.createElement("p",null,l))}var b=function(){return r.a.createElement("div",{className:"error"},r.a.createElement("p",{className:"error-text"},"Hmmm... there are no results for this location. Either this is not an eBird region ID (eg: CA-PR-PE, US-MD-003, SE-AB) ... or no one has recorded a sighting in the last 30 days. Maybe you could submit an eBird checklist!  ;)"))};function h(){var e=Object(a.useState)(!1),t=Object(m.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)([{comName:"",locName:"",obsDt:""}]),o=Object(m.a)(c,2),i=o[0],h=o[1];function f(){return(f=Object(u.a)(s.a.mark((function e(t){var n,a,r,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!((n=t.target.elements.location.value).length>0)){e.next=21;break}return(a=new Headers).append("X-eBirdApiToken","2ifbkhv7g8ct"),r={method:"GET",headers:a,redirect:"follow"},e.prev=6,e.next=9,fetch("https://api.ebird.org/v2/data/obs/".concat(n,"/recent?back=30"),r);case 9:return c=e.sent,e.next=12,c.json();case 12:(o=e.sent).length>0?(h(o[0]),l(!1)):(h({comName:"No bird!",locName:"",obsDt:""}),l(!0)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),alert("I don't think that's a valid Location code. Please refresh the page and try again.");case 19:e.next=23;break;case 21:l(!0),h({comName:"No bird!",locName:"",obsDt:""});case 23:case"end":return e.stop()}}),e,null,[[6,16]])})))).apply(this,arguments)}return r.a.createElement(d,null,r.a.createElement("h1",null,"Last Bird Sighting"),r.a.createElement(p,{getSightings:function(e){return f.apply(this,arguments)}}),r.a.createElement(E,{birdData:i}),n&&r.a.createElement(b,null))}function f(e){for(var t=[],n=0;n<e.birdList.length;n++)t.includes(e.birdList[n].comName)||t.push(e.birdList[n].comName);var a=t.map((function(e){return r.a.createElement("li",{className:"birdItem"},e)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Reported in the last 14 days..."),r.a.createElement("ul",null,a))}function g(){var e=Object(a.useState)([{comName:""}]),t=Object(m.a)(e,2),n=t[0],l=t[1];function c(){return(c=Object(u.a)(s.a.mark((function e(){var t,n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Headers).append("X-eBirdApiToken","2ifbkhv7g8ct"),n={method:"GET",headers:t,redirect:"follow"},e.next=5,fetch("https://api.ebird.org/v2/data/obs/CA-PE-PR/recent?back=14",n);case 5:return a=e.sent,e.next=8,a.json();case 8:r=e.sent,l(r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(d,null,r.a.createElement("h1",null,"Recent birds in Prince County, PEI"),r.a.createElement("button",{onClick:function(){return c.apply(this,arguments)}},"Get the list of recent birds"),r.a.createElement(f,{birdList:n}))}function v(e){for(var t=[],n=[],a=0;a<e.birdList.length;a++)t.includes(e.birdList[a].comName)||(t.push(e.birdList[a].comName),n.push({name:"".concat(e.birdList[a].comName),reviewed:e.birdList[a].obsReviewed,valid:e.birdList[a].obsValid}));var l=n.filter((function(e){return!1===e.reviewed})),c=n.filter((function(e){return!0===e.valid})),o=n.filter((function(e){return e.reviewed&&!e.valid})),i=l.map((function(e){return r.a.createElement("li",{className:"birdPending"},e.name," (Not yet verified)")})),s=c.map((function(e){return r.a.createElement("li",null,e.name)})),u=o.map((function(e){return r.a.createElement("li",{className:"birdNotValid"},e.name," was misidentified")}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Reported in the last 30 days..."),r.a.createElement("ul",null,i),r.a.createElement("ul",null,s),r.a.createElement("ul",null,u))}function N(){var e=Object(a.useState)([{comName:"",obsReviewed:""}]),t=Object(m.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)("CA-PE-PR"),o=Object(m.a)(c,2),i=o[0],p=o[1];function E(){return(E=Object(u.a)(s.a.mark((function e(){var t,n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Headers).append("X-eBirdApiToken","2ifbkhv7g8ct"),n={method:"GET",headers:t,redirect:"follow"},e.next=5,fetch("https://api.ebird.org/v2/data/obs/".concat(i,"/recent/notable?detail=full&back=30"),n);case 5:return a=e.sent,e.next=8,a.json();case 8:r=e.sent,l(r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(d,null,r.a.createElement("h1",null,"Rare or Unusual birds in ",i),r.a.createElement("button",{className:"location-change",onClick:function(){p("CA-ON-TO")}},"Change Location to Toronto"),r.a.createElement("button",{className:"location-change",onClick:function(){p("CA-PE-PR")}},"Change Location to PEI"),r.a.createElement("p",null,"... or enter manually"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),p(e.target.elements.location.value)}},r.a.createElement("input",{name:"location",type:"text",placeholder:"eBird region ID eg. CA-PE-PR"}),r.a.createElement("button",null," Set Location ")),r.a.createElement("button",{onClick:function(){return E.apply(this,arguments)}},"... and then get the list of notable birds"),r.a.createElement(v,{birdList:n}))}function y(e){var t=e.birdList.map((function(e){return r.a.createElement("li",{className:"birdItem"},e)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"All species ever recorded (species codes) in a region or at a Personal Checklist location..."),r.a.createElement("p",null,r.a.createElement("em",null,"(To do: convert these to common names?)")),r.a.createElement("ul",null,t))}function O(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)("L7359880"),o=Object(m.a)(c,2),i=o[0],p=o[1];function E(){return(E=Object(u.a)(s.a.mark((function e(){var t,n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Headers).append("X-eBirdApiToken","2ifbkhv7g8ct"),n={method:"GET",headers:t,redirect:"follow"},e.next=5,fetch("https://api.ebird.org/v2/product/spplist/".concat(i),n);case 5:return a=e.sent,e.next=8,a.json();case 8:r=e.sent,l(r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(d,null,r.a.createElement("h1",null,"All birds seen at ",i),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),p(e.target.elements.location.value)}},r.a.createElement("input",{name:"location",type:"text",placeholder:"eg. CA-PE-PR / L7359880"}),r.a.createElement("button",null," Set Location ")),r.a.createElement("button",{onClick:function(){return E.apply(this,arguments)}},"... and then get the list of birds"),r.a.createElement(y,{birdList:n}))}function C(e){var t=e.regionData.map((function(e){return r.a.createElement("li",{className:"regionItem"},e.name,": ",e.code)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"All subregions"),r.a.createElement("ul",null,t),r.a.createElement("p",{className:"more-info"},r.a.createElement("a",{href:"https://ebird.org/canada/region/world/regions?yr=all&m=&hsStats_sortBy=cl&hsStats_o=desc"},"You can also explore eBird.org to find your region ID")))}function k(){var e=Object(a.useState)("CA-ON"),t=Object(m.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)([]),o=Object(m.a)(c,2),i=o[0],p=o[1];function E(){return(E=Object(u.a)(s.a.mark((function e(){var t,a,r,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Headers).append("X-eBirdApiToken","2ifbkhv7g8ct"),a={method:"GET",headers:t,redirect:"follow"},e.next=5,fetch("https://api.ebird.org/v2/ref/region/list/subnational1/".concat(n,".json"),a);case 5:return r=e.sent,e.next=8,r.json();case 8:l=e.sent,console.log(l),p(l);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(u.a)(s.a.mark((function e(){var t,a,r,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Headers).append("X-eBirdApiToken","2ifbkhv7g8ct"),a={method:"GET",headers:t,redirect:"follow"},e.next=5,fetch("https://api.ebird.org/v2/ref/region/list/subnational2/".concat(n,".json"),a);case 5:return r=e.sent,e.next=8,r.json();case 8:l=e.sent,p(l);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(d,null,r.a.createElement("h1",null,"List of subregions in ",n),r.a.createElement("p",null,'For Countries and other "Top Level" areas:'),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),l(e.target.elements.country.value)}},r.a.createElement("input",{name:"country",type:"text",placeholder:"eg. SE, AU, GB"}),r.a.createElement("button",null," Set Country ")),r.a.createElement("button",{onClick:function(){return E.apply(this,arguments)}},"... and then get the list of subregions"),r.a.createElement("p",null,"Further explore subregions (eg. Canadian Provinces/US States, Great Britain: England etc.)"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),l(e.target.elements.location.value)}},r.a.createElement("input",{name:"location",type:"text",placeholder:"eg. CA-PE, US-MD, GB-ENG"}),r.a.createElement("button",null," Set Location ")),r.a.createElement("button",{onClick:function(){return b.apply(this,arguments)}},"... and then get the list of subregions"),r.a.createElement(C,{regionData:i}))}var w=function(){return a.createElement("div",null,a.createElement("nav",null,a.createElement(c.b,{to:"/"},"Home"),a.createElement(c.b,{to:"/recent"},"Recent"),a.createElement(c.b,{to:"/notable"},"Notable"),a.createElement(c.b,{to:"/baywalk"},"Species List"),a.createElement(c.b,{to:"/regions"},"Find a Region ID")),a.createElement(o.c,null,a.createElement(o.a,{exact:!0,path:"/"},a.createElement(h,null)),a.createElement(o.a,{exact:!0,path:"/recent"},a.createElement(g,null)),a.createElement(o.a,{exact:!0,path:"/notable"},a.createElement(N,null)),a.createElement(o.a,{exact:!0,path:"/baywalk"},a.createElement(O,null)),a.createElement(o.a,{exact:!0,path:"/regions"},a.createElement(k,null))))};l.render(a.createElement(c.a,null,a.createElement(w,null)),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.a3ca1330.chunk.js.map